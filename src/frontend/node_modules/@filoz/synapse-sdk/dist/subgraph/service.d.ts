import type { CommP, ApprovedProviderInfo, SubgraphRetrievalService, SubgraphConfig } from '../types.js';
export interface PaginationOptions {
    first?: number;
    skip?: number;
}
export interface QueryOptions extends PaginationOptions {
    where?: Record<string, any>;
    orderBy?: string;
    orderDirection?: 'asc' | 'desc';
}
export interface NestedQueryOptions extends QueryOptions {
    nestedWhere?: Record<string, any>;
}
export interface ProviderStats extends ApprovedProviderInfo {
    status: string;
    totalFaultedPeriods: number;
    totalFaultedRoots: number;
    totalProofSets: number;
    totalRoots: number;
    totalDataSize: number;
    createdAt: number;
    updatedAt: number;
}
export interface SubgraphProofSetInfo {
    id: string;
    setId: number;
    isActive: boolean;
    leafCount: number;
    totalDataSize: number;
    totalRoots: number;
    totalProofs: number;
    totalProvedRoots: number;
    totalFaultedRoots: number;
    createdAt: number;
    updatedAt: number;
}
export interface DetailedSubgraphProofSetInfo extends SubgraphProofSetInfo {
    listener: string;
    clientAddr: string;
    withCDN: boolean;
    challengeRange: number;
    lastProvenEpoch: number;
    nextChallengeEpoch: number;
    totalFaultedPeriods: number;
    metadata: string;
    owner: ApprovedProviderInfo;
    rail?: {
        id: string;
        railId: number;
        token: string;
        paymentRate: number;
        lockupPeriod: number;
        settledUpto: number;
        endEpoch: number;
    };
}
export interface RootInfo {
    id: string;
    setId: number;
    rootId: number;
    rawSize: number;
    leafCount: number;
    cid: CommP | null;
    removed: boolean;
    totalProofsSubmitted: number;
    totalPeriodsFaulted: number;
    lastProvenEpoch: number;
    lastProvenAt: number;
    lastFaultedEpoch: number;
    lastFaultedAt: number;
    createdAt: number;
    metadata: string;
    proofSet: {
        id: string;
        setId: number;
        isActive: boolean;
        owner: ApprovedProviderInfo;
    };
}
export interface FaultRecord {
    id: string;
    proofSetId: number;
    rootIds: number[];
    currentChallengeEpoch: number;
    nextChallengeEpoch: number;
    periodsFaulted: number;
    deadline: number;
    createdAt: number;
    proofSet: {
        id: string;
        setId: number;
        owner: ApprovedProviderInfo;
    };
}
export declare class SubgraphService implements SubgraphRetrievalService {
    private readonly endpoint;
    private readonly headers;
    constructor(subgraphConfig: SubgraphConfig);
    private resolveEndpoint;
    private buildGoldskyEndpoint;
    private buildHeaders;
    private normalizeQueryOptions;
    private executeQuery;
    private transformProviderData;
    private parseTimestamp;
    private safeConvertHexToCid;
    private isValidProviderData;
    getApprovedProvidersForCommP(commP: CommP): Promise<ApprovedProviderInfo[]>;
    getProviderByAddress(address: string): Promise<ApprovedProviderInfo | null>;
    queryProviders(options?: QueryOptions): Promise<ApprovedProviderInfo[]>;
    queryProofSets(options?: QueryOptions): Promise<DetailedSubgraphProofSetInfo[]>;
    queryRoots(options?: QueryOptions): Promise<RootInfo[]>;
    queryFaultRecords(options?: QueryOptions): Promise<FaultRecord[]>;
}
//# sourceMappingURL=service.d.ts.map